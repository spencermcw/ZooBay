import{x as O,d as B,f as P,u as R,k as q,c as L,r as E,h as V,o as c,a as l,b as r,P as $,Q as F,e as T,A as G,t as m,J as j,N as D,m as y,n as u,s as W,p as g,R as A,z as S,l as M,C as Y,D as Z,G as H,q as N,S as U}from"./index.728d6002.js";function J(a){var e={target:"confetti-holder",max:80,size:1,animate:!0,respawn:!0,props:["circle","square","triangle","line"],colors:[[165,104,246],[230,61,135],[0,199,228],[253,214,126]],clock:25,interval:null,rotate:!1,start_from_edge:!1,width:window.innerWidth,height:window.innerHeight};if(a&&(a.target&&(e.target=a.target),a.max&&(e.max=a.max),a.size&&(e.size=a.size),a.animate!==void 0&&a.animate!==null&&(e.animate=a.animate),a.respawn!==void 0&&a.respawn!==null&&(e.respawn=a.respawn),a.props&&(e.props=a.props),a.colors&&(e.colors=a.colors),a.clock&&(e.clock=a.clock),a.start_from_edge!==void 0&&a.start_from_edge!==null&&(e.start_from_edge=a.start_from_edge),a.width&&(e.width=a.width),a.height&&(e.height=a.height),a.rotate!==void 0&&a.rotate!==null&&(e.rotate=a.rotate)),typeof e.target!="object"&&typeof e.target!="string")throw new TypeError("The target parameter should be a node or string");if(typeof e.target=="object"&&(e.target===null||!e.target instanceof HTMLCanvasElement)||typeof e.target=="string"&&(document.getElementById(e.target)===null||!document.getElementById(e.target)instanceof HTMLCanvasElement))throw new ReferenceError("The target element does not exist or is not a canvas element");var f=typeof e.target=="object"?e.target:document.getElementById(e.target),n=f.getContext("2d"),h=[];function _(t,d){t||(t=1);var b=Math.random()*t;return d?Math.floor(b):b}var w=e.props.reduce(function(t,d){return t+(d.weight||1)},0);function I(){for(var t=Math.random()*w,d=0;d<e.props.length;++d){var b=e.props[d].weight||1;if(t<b)return d;t-=b}}function x(){var t=e.props[I()],d={prop:t.type?t.type:t,x:_(e.width),y:e.start_from_edge?e.clock>=0?-10:parseFloat(e.height)+10:_(e.height),src:t.src,radius:_(4)+1,size:t.size,rotate:e.rotate,line:Math.floor(_(65)-30),angles:[_(10,!0)+2,_(10,!0)+2,_(10,!0)+2,_(10,!0)+2],color:e.colors[_(e.colors.length,!0)],rotation:_(360,!0)*Math.PI/180,speed:_(e.clock/7)+e.clock/30};return d}function p(t){if(!!t){var d=t.radius<=3?.4:.8;switch(n.fillStyle=n.strokeStyle="rgba("+t.color+", "+d+")",n.beginPath(),t.prop){case"circle":{n.moveTo(t.x,t.y),n.arc(t.x,t.y,t.radius*e.size,0,Math.PI*2,!0),n.fill();break}case"triangle":{n.moveTo(t.x,t.y),n.lineTo(t.x+t.angles[0]*e.size,t.y+t.angles[1]*e.size),n.lineTo(t.x+t.angles[2]*e.size,t.y+t.angles[3]*e.size),n.closePath(),n.fill();break}case"line":{n.moveTo(t.x,t.y),n.lineTo(t.x+t.line*e.size,t.y+t.radius*5),n.lineWidth=2*e.size,n.stroke();break}case"square":{n.save(),n.translate(t.x+15,t.y+5),n.rotate(t.rotation),n.fillRect(-15*e.size,-5*e.size,15*e.size,5*e.size),n.restore();break}case"svg":{n.save();var b=new window.Image;b.src=t.src;var o=t.size||15;n.translate(t.x+o/2,t.y+o/2),t.rotate&&n.rotate(t.rotation),n.drawImage(b,-(o/2)*e.size,-(o/2)*e.size,o*e.size,o*e.size),n.restore();break}}}}var k=function(){e.animate=!1,clearInterval(e.interval),requestAnimationFrame(function(){n.clearRect(0,0,f.width,f.height);var t=f.width;f.width=1,f.width=t})},z=function(){f.width=e.width,f.height=e.height,h=[];for(var t=0;t<e.max;t++)h.push(x());function d(){n.clearRect(0,0,e.width,e.height);for(var o in h)p(h[o]);b(),e.animate&&requestAnimationFrame(d)}function b(){for(var o=0;o<e.max;o++){var i=h[o];i&&(e.animate&&(i.y+=i.speed),i.rotate&&(i.rotation+=i.speed/35),(i.speed>=0&&i.y>e.height||i.speed<0&&i.y<0)&&(e.respawn?(h[o]=i,h[o].x=_(e.width,!0),h[o].y=i.speed>=0?-10:parseFloat(e.height)):h[o]=void 0))}h.every(function(s){return s===void 0})&&k()}return requestAnimationFrame(d)};return{render:z,clear:k}}const v=a=>(Y("data-v-3810b5b0"),a=a(),Z(),a),Q={class:"manage-listings mb-5"},K={class:"container"},X={class:"row row-cols-1 row-cols-xl-2 g-4"},ee={class:"listing"},te={class:"row g-3"},oe={class:"col-12 col-md-5"},se={class:"col-12 col-md-7"},ne={class:"d-flex flex-column justify-content-between h-100"},re={class:"fs-2"},ae={key:0},ie=v(()=>r("i",{class:"bi bi-clock me-1"},null,-1)),ce=g(": "),de={key:1,class:"bi bi-infinity"},le=v(()=>r("strong",null,"Creator: ",-1)),ue={key:0,class:"gold"},he={key:1},_e=v(()=>r("strong",null,"# Assets Included:",-1)),fe=v(()=>r("strong",null,"# Bids:",-1)),be=v(()=>r("strong",null,"# Bidders:",-1)),ge={key:1},ve=g(" $ZOO "),me=v(()=>r("strong",null,"Minimum Bid:",-1)),ye=v(()=>r("strong",null,"Buy Now Price:",-1)),we={key:2},xe={key:0},pe=v(()=>r("strong",null,"Assets Claimed:",-1)),ke={key:1},Ce=v(()=>r("strong",null,"ZOO Claimed: ",-1)),Ie={key:3,class:"gold"},ze=v(()=>r("i",{class:"bi bi-check-lg"},null,-1)),Te={key:4},Ae={key:0,class:"text-danger"},Se=v(()=>r("i",{class:"bi bi-x-lg"},null,-1)),Le=g(" You Lost "),Ee=[Se,Le],Me={key:1,class:"text-danger"},Ne=v(()=>r("i",{class:"bi bi-exclamation-diamond-fill"},null,-1)),Oe=g(" You've been out-bid. Place a new bid now! "),Be=[Ne,Oe],Pe={class:"d-grid gap-2 my-2"},Re=["onClick","disabled"],qe=g(" Claim "),Ve=["onClick","disabled"],$e=g(" Cancel Listing "),Fe=["onClick"],Ge=B({props:{listings:null},setup(a){const e=P(),f=R(q),n=L(()=>f.getters[H.ACTIVE_ACCOUNT_ADDRESS]),h=L(()=>f.state.txnPending),_=E(null),w=E(null),I=o=>{const i=new Set;return o.bids.forEach(s=>i.add(s.bidder)),i.size},x=o=>o.bids.length==0&&!o.creatorClaimed||o.bids.length>0&&o.bids[0].bidder===n.value&&!o.bidderClaimed,p=o=>o.creator===n.value&&!o.creatorClaimed&&o.bids.length>0,k=o=>[{str:"Assets",valid:x(o)},{str:"ZOO",valid:p(o)}].filter(i=>i.valid).map(i=>i.str).join(" & "),z=o=>o.expired&&(x(o)||p(o)),t=o=>!o.expired&&o.bids.length===0,d=o=>{w.value.clear(),f.dispatch(N.CLAIM_LISTING,o).then(()=>{f.commit(U.CLAIM_LISTING,o),w.value.render()}).catch(i=>{console.error(i),w.value.clear()})},b=o=>{f.dispatch(N.CANCEL_LISTING,o).then(()=>e.go(0)).catch(console.error)};return V(()=>{const o={target:_.value,props:["square","circle"],start_from_edge:!0,max:220,respawn:!1,colors:[[240,187,51],[228,159,31],[170,111,0]]};w.value=new J(o)}),(o,i)=>(c(),l("div",Q,[r("canvas",{id:"confetti-canvas",ref_key:"confettiCanvas",ref:_},null,512),r("div",K,[r("div",X,[(c(!0),l($,null,F(a.listings,s=>(c(),l("div",{class:"col",key:s.id},[r("div",ee,[r("div",te,[r("div",oe,[T(G,{assets:s.assets,"show-accordion":!1,"show-title":!1},null,8,["assets"])]),r("div",se,[r("div",ne,[r("div",null,[r("p",re,"Listing "+m(s.id),1),s.expired?y("",!0):(c(),l("p",ae,[ie,ce,s.buyNowOnly?y("",!0):(c(),j(D,{key:0,expiration:s.expiresAt},null,8,["expiration"])),s.buyNowOnly?(c(),l("i",de)):y("",!0)])),r("p",null,[le,s.creator===u(n)?(c(),l("span",ue,"You")):(c(),l("span",he,m(u(W)(s.creator)),1))]),r("p",null,[_e,g(" "+m(s.assets.length),1)]),r("p",null,[fe,g(" "+m(s.bids.length),1)]),r("p",null,[be,g(" "+m(I(s)),1)]),s.bids.length?(c(),l("p",ge,[r("strong",null,m(s.expired?"Winning":"Current")+" Bid: ",1),r("span",{class:A({gold:s.bids[0].bidder===u(n)})},m(u(S)(s.bids[0].amount)),3),ve])):y("",!0),r("p",null,[me,g(" "+m(u(S)(s.minBid))+" $ZOO",1)]),r("p",null,[ye,g(" "+m(u(S)(s.price))+" $ZOO",1)]),s.expired?(c(),l("div",we,[s.bids.length>0&&s.bids[0].bidder===u(n)||s.bids.length===0&&s.creator===u(n)?(c(),l("div",xe,[r("p",null,[pe,r("i",{class:A(["bi mx-1",s.bidderClaimed?"bi-check-lg":"bi-x-lg"])},null,2)])])):y("",!0),s.creator===u(n)&&s.bids.length>0?(c(),l("div",ke,[r("p",null,[Ce,r("i",{class:A(["bi mx-1",s.creatorClaimed?"bi-check-lg":"bi-x-lg"])},null,2)])])):y("",!0)])):y("",!0),s.bids.length>0&&s.bids[0].bidder===u(n)?(c(),l("p",Ie,[ze,g(" "+m(s.expired?"You Won!":"You are the highest bidder!"),1)])):y("",!0),s.bids.length>0&&s.bids[0].bidder!==u(n)&&s.bids.findIndex(C=>C.bidder===u(n))!==-1?(c(),l("p",Te,[s.expired?(c(),l("span",Ae,Ee)):(c(),l("span",Me,Be))])):y("",!0)]),r("div",Pe,[z(s)?(c(),l("button",{key:0,class:"btn btn-success",onClick:C=>d(s.id),disabled:u(h)},[T(M,{spinning:u(h)},null,8,["spinning"]),qe,r("span",null,m(k(s)),1)],8,Re)):y("",!0),t(s)?(c(),l("button",{key:1,class:"btn btn-danger",onClick:C=>b(s.id),disabled:u(h)},[T(M,{spinning:u(h)},null,8,["spinning"]),$e],8,Ve)):y("",!0),r("button",{class:"btn cz-btn cz-btn--secondary",onClick:C=>u(e).push({name:"Listing",params:{id:s.id}})}," View Listing ",8,Fe)])])])])])]))),128))])])]))}});var De=O(Ge,[["__scopeId","data-v-3810b5b0"]]);export{De as L};
